<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TMS320F28335 Library: eQEP</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customize.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../th-koeln-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TMS320F28335 Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Documentation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/dc6/eqep.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">eQEP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The enhanced Quadrature Encoder Pulse (eQEP) module can be used to read information about speed and direction from an encoder for rotary machines. Therefore, the encoder needs to provide two signals that are shifted 90Â° out of phase from each other: QEPA and QEPB. Furthermore the amount of lines for rotary detection of the encoder needs to be known. <br  />
 The TMS302F28335 offers two eQEP-Interfaces: eQEP1 and eQEP2. Each Interface supports up to 4 Pins: QEPA, QEPB, QEPI, QEPS. The implementation of eQEP in this library only uses QEPA and QEPB of one module.</p>
<p><a class="el" href="../../d2/d48/eqep_8c.html#a8cab7634296e13e9da8f5079d73739f6" title="Get direction of rotary machine applied to eQEPInterface.">eQEP_getDirection()</a> returns 0 for Counter-clockwise rotation (or reverse movement) and 1 for Clockwise rotation (or forward movement). <br  />
 <a class="el" href="../../d2/d48/eqep_8c.html#a7c15c1c3368f3871012eda8b554b5e54" title="Get rpm of rotary machine applied to eQEPInterface.">eQEP_getRpm()</a> returns the speed in revolution per minute.</p>
<hr  />
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">QEPA  </th><th class="markdownTableHeadNone">QEPB   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>eQEP1</b>  </td><td class="markdownTableBodyNone">GPIO20  </td><td class="markdownTableBodyNone">GPIO21   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>eQEP2</b>  </td><td class="markdownTableBodyNone">GPIO24  </td><td class="markdownTableBodyNone">GPIO25   </td></tr>
</table>
<hr  />
<h3><a class="anchor" id="autotoc_md60"></a>
Code example</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d69/global__defines_8h.html">global_defines.h</a>&quot;</span>                     <span class="comment">//Include global_defines.h</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d5f/system__controls_8h.html">system_controls/system_controls.h</a>&quot;</span>    <span class="comment">//Include module of system controls</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../df/dd8/eqep_8h.html">eqep/eqep.h</a>&quot;</span>                          <span class="comment">//Include module of eQEP</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="../../dc/dd4/struct__e_q_e_p_interface.html">eQEPInterface</a> eQEP_1 = {GPIO20, GPIO21, 300};   <span class="comment">//Instantiate eQEP Module1 with QEPA on GPIO20, QEPB on GPIO21 and 300 lines for rotary detection of the encoder</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main(<span class="keywordtype">void</span>){</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;                             <span class="comment">//Optional: can be used to check return values of functions</span></div>
<div class="line">    <span class="keywordtype">int</span> direction = 0;</div>
<div class="line">    <span class="keywordtype">int</span> eqep_rpm = 0;</div>
<div class="line">    <a class="code" href="../../d6/dd6/system__controls_8c.html#af00c2329b3f7c533409b5d9983b5103c">setSystemControls</a>();                        <span class="comment">//Call setSystemControls() function</span></div>
<div class="line">    result = <a class="code" href="../../d2/d48/eqep_8c.html#adb788bca2127af6733d7b514fd34fbea">init_eQEP</a>(eQEP_1);                 <span class="comment">//Configures eQEP1 module. Returns result of operation</span></div>
<div class="line">    <span class="keywordflow">while</span>(1){                                   <span class="comment">//Endless loop</span></div>
<div class="line">        direction = <a class="code" href="../../d2/d48/eqep_8c.html#a8cab7634296e13e9da8f5079d73739f6">eQEP_getDirection</a>(eQEP_1);  <span class="comment">//Returns the direction of rotary machine/encoder plugged to eQEP1. Returns negative value for invalid input parameter</span></div>
<div class="line">        eqep_rpm = <a class="code" href="../../d2/d48/eqep_8c.html#a7c15c1c3368f3871012eda8b554b5e54">eQEP_getRpm</a>(eQEP_1);         <span class="comment">//Returns the speed of rotary machine/encoder plugged to eQEP1 in revolution per minute. Returns negative value for invalid input parameter   </span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md62"></a>
Documented C-Code of module:</h3>
<p><a href="../../dir_3f97004f7146f2ff37b8e6d1b0cfcac4.html">eQEP</a></p>
<hr  />
<h3><a class="anchor" id="autotoc_md64"></a>
Detailed description in Technical Reference Manual:</h3>
<p><a href="../../../doc_documents/Technical_Reference_Manual.pdf#page=389" target="_blank">Technical_Reference_Manual</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aeqep_8h_html"><div class="ttname"><a href="../../df/dd8/eqep_8h.html">eqep.h</a></div><div class="ttdoc">Header file for eQEP module.</div></div>
<div class="ttc" id="aeqep_8c_html_a7c15c1c3368f3871012eda8b554b5e54"><div class="ttname"><a href="../../d2/d48/eqep_8c.html#a7c15c1c3368f3871012eda8b554b5e54">eQEP_getRpm</a></div><div class="ttdeci">int16 eQEP_getRpm(eQEPInterface eQEP)</div><div class="ttdoc">Get rpm of rotary machine applied to eQEPInterface.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/eqep_8c_source.html#l00131">eqep.c:131</a></div></div>
<div class="ttc" id="aeqep_8c_html_adb788bca2127af6733d7b514fd34fbea"><div class="ttname"><a href="../../d2/d48/eqep_8c.html#adb788bca2127af6733d7b514fd34fbea">init_eQEP</a></div><div class="ttdeci">int16 init_eQEP(eQEPInterface eQEP)</div><div class="ttdoc">Initialization of eQEPInterface.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/eqep_8c_source.html#l00033">eqep.c:33</a></div></div>
<div class="ttc" id="astruct__e_q_e_p_interface_html"><div class="ttname"><a href="../../dc/dd4/struct__e_q_e_p_interface.html">_eQEPInterface</a></div><div class="ttdoc">eQEP Interface: Assign GPIOs to TMC_BASE_EQEP1 or TMC_BASE_EQEP2.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/eqep_8h_source.html#l00013">eqep.h:13</a></div></div>
<div class="ttc" id="aglobal__defines_8h_html"><div class="ttname"><a href="../../d4/d69/global__defines_8h.html">global_defines.h</a></div><div class="ttdoc">Header file for global defines.</div></div>
<div class="ttc" id="asystem__controls_8c_html_af00c2329b3f7c533409b5d9983b5103c"><div class="ttname"><a href="../../d6/dd6/system__controls_8c.html#af00c2329b3f7c533409b5d9983b5103c">setSystemControls</a></div><div class="ttdeci">void setSystemControls(void)</div><div class="ttdoc">Configuration of system control register.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd6/system__controls_8c_source.html#l00013">system_controls.c:13</a></div></div>
<div class="ttc" id="aeqep_8c_html_a8cab7634296e13e9da8f5079d73739f6"><div class="ttname"><a href="../../d2/d48/eqep_8c.html#a8cab7634296e13e9da8f5079d73739f6">eQEP_getDirection</a></div><div class="ttdeci">int16 eQEP_getDirection(eQEPInterface eQEP)</div><div class="ttdoc">Get direction of rotary machine applied to eQEPInterface.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/eqep_8c_source.html#l00110">eqep.c:110</a></div></div>
<div class="ttc" id="asystem__controls_8h_html"><div class="ttname"><a href="../../d2/d5f/system__controls_8h.html">system_controls.h</a></div><div class="ttdoc">Header file for System Controls module.</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
